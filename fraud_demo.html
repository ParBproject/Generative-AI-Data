<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Synthetic Fraud Data Demo</title>
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <style>
    body {font-family: Arial, sans-serif; margin:40px; background:#f5f6fa;}
    #chart {width:100%;max-width:700px;height:450px;margin-top:20px;}
    label {font-weight:bold;}
  </style>
</head>
<body>
  <h1>Synthetic Fraud Detection Demo</h1>
  <p>Use the controls to explore fraud rates, enforce class balance, and simulate concept drift.</p>
  <div style="margin-top:10px;">
    <label><input type="checkbox" id="balanced" /> Class-balanced</label>
  </div>
  <div style="margin-top:10px;">
    <label for="rate">Fraud percentage: <span id="lblRate">5</span>%</label>
    <input type="range" id="rate" min="1" max="50" value="5" />
  </div>
  <div style="margin-top:10px;">
    <label for="drift">Drift level: <span id="lblDrift">0</span></label>
    <input type="range" id="drift" min="0" max="40" value="0" />
  </div>
  <div id="chart"></div>
  <script>
    function generateData(fraudPct, driftLevel) {
      const total = 1000;
      const fraudCount = Math.round(total * fraudPct / 100);
      const legitCount = total - fraudCount;
      const legitX = [], legitY = [], fraudX = [], fraudY = [];
      for (let i = 0; i < legitCount; i++) {
        legitX.push(Math.random() * 50 + driftLevel);
        legitY.push(Math.random() * 50 + driftLevel);
      }
      for (let i = 0; i < fraudCount; i++) {
        fraudX.push(70 + Math.random() * 30);
        fraudY.push(70 + Math.random() * 30);
      }
      const traceLegit = {x: legitX, y: legitY, mode:'markers', name:'Legit', marker:{color:'rgba(0,123,255,0.7)'}};
      const traceFraud = {x: fraudX, y: fraudY, mode:'markers', name:'Fraud', marker:{color:'rgba(220,53,69,0.8)'}};
      Plotly.newPlot('chart', [traceLegit, traceFraud], {
        xaxis:{title:'Transaction Amount'},
        yaxis:{title:'Transaction Time'},
        margin:{t:30},
      }, {responsive:true});
    }
    const rateSlider = document.getElementById('rate');
    const driftSlider = document.getElementById('drift');
    const lblRate = document.getElementById('lblRate');
    const lblDrift = document.getElementById('lblDrift');
    const balanceToggle = document.getElementById('balanced');

    function update() {
      const pct = balanceToggle.checked ? 50 : parseInt(rateSlider.value);
      const driftVal = parseInt(driftSlider.value);
      lblRate.textContent = pct;
      lblDrift.textContent = driftVal;
      rateSlider.disabled = balanceToggle.checked;
      generateData(pct, driftVal);
    }

    rateSlider.addEventListener('input', update);
    driftSlider.addEventListener('input', update);
    balanceToggle.addEventListener('change', update);
    update();
  </script>
</body>
</html>
